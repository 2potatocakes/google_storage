<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: GoogleStorage::Client
  
    &mdash; Documentation by YARD 0.7.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../GoogleStorage.html" title="GoogleStorage (module)">GoogleStorage</a></span></span>
     &raquo; 
    <span class="title">Client</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: GoogleStorage::Client
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">GoogleStorage::Client</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/google_storage/client.rb<span class="defines">,<br />
  lib/google_storage/token.rb,<br /> lib/google_storage/bucket.rb,<br /> lib/google_storage/object.rb,<br /> lib/google_storage/request.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h2>Buckets &amp; Objects</h2>
<p>
Buckets are the basic containers that hold all of your data. There is only
one Google namespace so every bucket across the entire namespace has to be
uniquely named so you may find that some bucket names have already been
taken.
</p>
<p>
You can have multiple folders and files within a bucket but you can&#8217;t
nest buckets inside of each other.
</p>
<p>
Objects are basically just another name for Files, stored within Google
Storage. Google Storage stores Objects in 2 parts, holding both the object
data and the object metadata. The metadata just holds key value data that
describes the objects properties.
</p>
<h2>Predefined ACL&#8217;s (Access Control Lists)</h2>
<p>
ACL&#8217;s allow you to control permission settings on Objects and Buckets
</p>
<p>
Google Storage uses access control lists (ACLs) to manage object and bucket
access. ACLs are the mechanism you use to share objects with other users
and allow other users to access your buckets and objects.
</p>
<p>
At the moment, this google_storage gem only supports the following
pre-defined ACL&#8217;s. I&#8217;ll add support for custom ACL&#8217;s
soon.
</p>
<table>
<tr><td valign="top">project-private </td><td><p>
Gives permission to the project team based on their roles. Anyone who is
part of the team has READ permission and project owners and project editors
have FULL_CONTROL permission. This is the default ACL that&#8217;s applied
when you create a bucket.
</p>
</td></tr>
<tr><td valign="top">private </td><td><p>
Gives the requester FULL_CONTROL permission for a bucket or object. This is
the default ACL that&#8217;s applied when you upload an object.
</p>
</td></tr>
<tr><td valign="top">public-read </td><td><p>
Gives the requester FULL_CONTROL permission and gives all anonymous users
READ permission. When you apply this to an object, anyone on the Internet
can read the object without authenticating.
</p>
</td></tr>
<tr><td valign="top">public-read-write </td><td><p>
Gives the requester FULL_CONTROL permission and gives all anonymous users
READ and WRITE permission. This ACL applies only to buckets.
</p>
</td></tr>
<tr><td valign="top">authenticated-read </td><td><p>
Gives the requester FULL_CONTROL permission and gives all authenticated
Google account holders READ permission.
</p>
</td></tr>
<tr><td valign="top">bucket-owner-read </td><td><p>
Gives the requester FULL_CONTROL permission and gives the bucket owner READ
permission. This is used only with objects.
</p>
</td></tr>
<tr><td valign="top">bucket-owner-full-control </td><td><p>
Gives the requester FULL_CONTROL permission and gives the bucket owner
FULL_CONTROL permission. This is used only with objects.
</p>
</td></tr>
</table>


  </div>
</div>
<div class="tags">
  
</div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acquire_refresh_token-instance_method" title="#acquire_refresh_token (instance method)">- (Object) <strong>acquire_refresh_token</strong>(token, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorization_url-instance_method" title="#authorization_url (instance method)">- (Object) <strong>authorization_url</strong>(scope) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bucket_acls-instance_method" title="#bucket_acls (instance method)">- (Object) <strong>bucket_acls</strong>(bucket_name, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Lists the ACL that has been applied to a bucket</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_bucket-instance_method" title="#create_bucket (instance method)">- (Object) <strong>create_bucket</strong>(bucket_name, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Creates a new bucket for your project and applies the
&#8216;project-private&#8217; ACL by default</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_bucket-instance_method" title="#delete_bucket (instance method)">- (Object) <strong>delete_bucket</strong>(bucket_name, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Deletes a specified bucket from your project</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_object-instance_method" title="#delete_object (instance method)">- (Object) <strong>delete_object</strong>(bucket_name, filename, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Deletes an Object from your bucket</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_bucket-instance_method" title="#get_bucket (instance method)">- (Object) <strong>get_bucket</strong>(bucket_name, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Returns a list of all Objects within a specified bucket</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_object-instance_method" title="#get_object (instance method)">- (Object) <strong>get_object</strong>(bucket_name, filename, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Returns a Google Storage Object inside of a Hash</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Client) <strong>initialize</strong>(options = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>You need to initialize a client to be able to make requests with the
google_storage gem</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_buckets-instance_method" title="#list_buckets (instance method)">- (Object) <strong>list_buckets</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Lists all buckets available within your project</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#object_acls-instance_method" title="#object_acls (instance method)">- (Object) <strong>object_acls</strong>(bucket_name, filename, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Lists the ACL that has been applied to a particular object</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#object_head-instance_method" title="#object_head (instance method)">- (Object) <strong>object_head</strong>(bucket_name, filename, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Returns the metadata of an Object stored</b>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_object-instance_method" title="#put_object (instance method)">- (Object) <strong>put_object</strong>(bucket_name, filename, options = {}) </a>
    

    
      (also: #upload_object)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<b>Uploads an Object to Google Storage, or updates if using the same
filename</b>.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="GoogleStorage::Client (class)">Client</a></span></tt>) <strong>initialize</strong>(options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>You need to initialize a client to be able to make requests with the
google_storage gem</b>
</p>
<p>
Example:
</p>
<p>
The following will look for google_storage.yml in your rails config
directory
</p>
<pre class="code">
  <span class='id client'>client</span> <span class='op'>=</span> <span class='const'>GoogleStorage</span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id new'>new</span>
</pre>
<p>
Otherwise you can pass in the path to the google_storage.yml
</p>
<pre class="code">
  <span class='id client'>client</span> <span class='op'>=</span> <span class='const'>GoogleStorage</span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:config_yml</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C:/example_path/google_storage.yml</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
</pre>
<p>
Other options:
</p>
<pre class="code">
  :debug =&gt; true      &lt;-- This will output all debug information from the HTTP requests to $stderr</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/client.rb', line 63</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:config_yml</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:config_yml</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id nil?'>nil?</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id root'>root</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>File</span><span class='period'>.</span><span class='id exists?'>exists?</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id root'>root</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage.yml</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id config_path'>config_path</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:config_yml</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='const'>File</span><span class='period'>.</span><span class='id expand_path'>expand_path</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:config_yml</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id root'>root</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage.yml</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> \nCan't find a google_storage.yml file to initialise with..
\nIf running inside a Rails Application
Please run: rails generate google_storage:install
To generate a google_storage.yml file in your config directory
\nIf running manually within a script or whatever
Initialise GoogleStorage with a path to your config yml file
Example: GoogleStorage::Client.new(:config_yml =&gt; 'path to your google storage yml')
\nIf running a rake task try passing: path='path to your google storage yml'
</span><span class='tstring_content'>\n\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id config_path'>config_path</span> <span class='op'>&amp;&amp;</span> <span class='const'>File</span><span class='period'>.</span><span class='id exists?'>exists?</span><span class='lparen'>(</span><span class='id config_path'>config_path</span><span class='rparen'>)</span>

  <span class='id config_yml'>config_yml</span> <span class='op'>=</span> <span class='const'>YAML</span><span class='op'>::</span><span class='id load'>load</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id config_path'>config_path</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='ivar'>@project_id</span>     <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_config</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>x-goog-project-id</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>

  <span class='ivar'>@client_id</span>      <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>web_applications</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client_id</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='ivar'>@client_secret</span>  <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>web_applications</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client_secret</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='ivar'>@client_secret</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@refresh_token</span>  <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>refresh_token</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>refresh_token</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>

  <span class='comment'>#TODO Add support for individual permission types
</span>  <span class='kw'>if</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@gsid_you</span>       <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>you</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>you</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@gsid_owners</span>    <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>owners</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>owners</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@gsid_editors</span>   <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>editors</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>editors</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@gsid_team</span>      <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>team</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>google_storage_ids</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>team</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'>#TODO - make redirect_uri's support multiple urls
</span>  <span class='ivar'>@redirect_uri</span>   <span class='op'>=</span> <span class='id config_yml'>config_yml</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>web_applications</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>redirect_uris</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='comment'>#TODO - maybe add support for API v1 as well... but probably not..
</span>  <span class='ivar'>@api_version</span>    <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:x_goog_api_version</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:x_goog_api_version</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='int'>2</span>
  <span class='ivar'>@debug</span>          <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:debug</span><span class='rbracket'>]</span>
  <span class='ivar'>@timeout</span>        <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>
  <span class='ivar'>@host</span>           <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:host</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:host</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>commondatastorage.googleapis.com</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="acquire_refresh_token-instance_method">
  
    - (<tt>Object</tt>) <strong>acquire_refresh_token</strong>(token, options = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/token.rb', line 18</span>

<span class='kw'>def</span> <span class='id acquire_refresh_token'>acquire_refresh_token</span><span class='lparen'>(</span><span class='id token'>token</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>grant_type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>authorization_code</span><span class='tstring_end'>'</span></span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id post_request'>post_request</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>accounts.google.com</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/o/oauth2/token</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id token'>token</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>refresh_token</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>refresh_token</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to acquire a refresh token. Something went wrong. Try getting a new Auth code.</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authorization_url-instance_method">
  
    - (<tt>Object</tt>) <strong>authorization_url</strong>(scope) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/token.rb', line 4</span>

<span class='kw'>def</span> <span class='id authorization_url'>authorization_url</span><span class='lparen'>(</span><span class='id scope'>scope</span><span class='rparen'>)</span>
  <span class='id scope_url'>scope_url</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id scope'>scope</span>
    <span class='kw'>when</span> <span class='symbol'>:read_only</span>
      <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>https://www.googleapis.com/auth/devstorage.read_only</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='symbol'>:read_write</span>
      <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>https://www.googleapis.com/auth/devstorage.read_write</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='symbol'>:full_control</span>
      <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>https://www.googleapis.com/auth/devstorage.full_control</span><span class='tstring_end'>'</span></span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>https://www.google.com/m8/feeds/</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://accounts.google.com/o/oauth2/auth?client_id=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@client_id</span><span class='rbrace'>}</span><span class='tstring_content'>&amp;redirect_uri=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@redirect_uri</span><span class='rbrace'>}</span><span class='tstring_content'>&amp;scope=</span><span class='embexpr_beg'>#{</span><span class='id scope_url'>scope_url</span><span class='rbrace'>}</span><span class='tstring_content'>&amp;response_type=code</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="bucket_acls-instance_method">
  
    - (<tt>Object</tt>) <strong>bucket_acls</strong>(bucket_name, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Lists the ACL that has been applied to a bucket</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#getbucket">code.google.com/apis/storage/docs/reference-methods.html#getbucket</a>
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id client'>client</span><span class='period'>.</span><span class='id bucket_acls'>bucket_acls</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/bucket.rb', line 39</span>

<span class='kw'>def</span> <span class='id bucket_acls'>bucket_acls</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/?acl</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AccessControlList</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:bucket_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id bucket_name'>bucket_name</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:acl</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AccessControlList</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:raw</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
    <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id each_key'>each_key</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id key'>key</span><span class='op'>|</span> <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:success</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:bucket_name</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:acl</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:raw</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_bucket-instance_method">
  
    - (<tt>Object</tt>) <strong>create_bucket</strong>(bucket_name, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Creates a new bucket for your project and applies the
&#8216;project-private&#8217; ACL by default</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#putbucket">code.google.com/apis/storage/docs/reference-methods.html#putbucket</a>
</p>
<p>
You can apply a different ACL to a bucket by passing in an :x_goog_acl
option and applying one of the predefined ACL&#8217;s
</p>
<p>
Example:
</p>
<pre class="code">
    client.create_bucket('bucket_name')                                &lt;-- private bucket
    client.create_bucket('bucket_name', :x_goog_acl =&gt; 'public-read')  &lt;-- public readable bucket
</pre>
<p>
Available Options:
</p>
<pre class="code">
  :x_goog_acl =&gt; 'public-read'</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/bucket.rb', line 71</span>

<span class='kw'>def</span> <span class='id create_bucket'>create_bucket</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:send_goog_project_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id put'>put</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200</span><span class='tstring_end'>&quot;</span></span>
    <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id clear'>clear</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:bucket_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id bucket_name'>bucket_name</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bucket created</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete_bucket-instance_method">
  
    - (<tt>Object</tt>) <strong>delete_bucket</strong>(bucket_name, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Deletes a specified bucket from your project</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#deletebucket">code.google.com/apis/storage/docs/reference-methods.html#deletebucket</a>
</p>
<p>
<b>Note:</b> You can only delete an empty bucket
</p>
<p>
Example:
</p>
<pre class="code">
    <span class='id client'>client</span><span class='period'>.</span><span class='id delete_bucket'>delete_bucket</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/bucket.rb', line 127</span>

<span class='kw'>def</span> <span class='id delete_bucket'>delete_bucket</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id delete'>delete</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>204</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:bucket_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id bucket_name'>bucket_name</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bucket deleted</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete_object-instance_method">
  
    - (<tt>Object</tt>) <strong>delete_object</strong>(bucket_name, filename, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Deletes an Object from your bucket</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#deleteobject">code.google.com/apis/storage/docs/reference-methods.html#deleteobject</a>
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id client'>client</span><span class='period'>.</span><span class='id delete_object'>delete_object</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>file.jpg</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/object.rb', line 175</span>

<span class='kw'>def</span> <span class='id delete_object'>delete_object</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id filename'>filename</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id filename'>filename</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\/</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id delete'>delete</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id filename'>filename</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>204</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span>          <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span>          <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Object deleted successfully</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_bucket-instance_method">
  
    - (<tt>Object</tt>) <strong>get_bucket</strong>(bucket_name, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Returns a list of all Objects within a specified bucket</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#getbucket">code.google.com/apis/storage/docs/reference-methods.html#getbucket</a>
</p>
<p>
Example:
</p>
<pre class="code">
    <span class='id client'>client</span><span class='period'>.</span><span class='id get_bucket'>get_bucket</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/bucket.rb', line 96</span>

<span class='kw'>def</span> <span class='id get_bucket'>get_bucket</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200</span><span class='tstring_end'>&quot;</span></span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:bucket_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id bucket_name'>bucket_name</span>
    <span class='id contents'>contents</span> <span class='op'>=</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ListBucketResult</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Contents</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='const'>Array</span><span class='period'>.</span><span class='id new'>new</span> <span class='op'>:</span> <span class='kw'>nil</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ListBucketResult</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Contents</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>?</span> \
      <span class='lparen'>(</span><span class='id contents'>contents</span> <span class='op'>=</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ListBucketResult</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Contents</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span> \
      <span class='lparen'>(</span><span class='id contents'>contents</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ListBucketResult</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Contents</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id contents'>contents</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:contents</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id contents'>contents</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:raw</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
    <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id each_key'>each_key</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id key'>key</span><span class='op'>|</span> <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:success</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:bucket_name</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:contents</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:raw</span>  <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_object-instance_method">
  
    - (<tt>Object</tt>) <strong>get_object</strong>(bucket_name, filename, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Returns a Google Storage Object inside of a Hash</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#getobject">code.google.com/apis/storage/docs/reference-methods.html#getobject</a>
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='const'>Returns</span> <span class='id a'>a</span> <span class='const'>Hash</span> <span class='id containing'>containing</span> <span class='id your'>your</span> <span class='id object'>object</span>
    <span class='id client'>client</span><span class='period'>.</span><span class='id get_object'>get_object</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>example_image.jpg</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>

  <span class='const'>Or</span> <span class='id write'>write</span> <span class='id the'>the</span> <span class='id file'>file</span> <span class='id directly'>directly</span> <span class='id to'>to</span> <span class='id your'>your</span> <span class='id file'>file</span> <span class='id system'>system</span>
    <span class='id client'>client</span><span class='period'>.</span><span class='id get_object'>get_object</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>example_image.jpg</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:write_to_file</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C:/example/file.jpg</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/object.rb', line 23</span>

<span class='kw'>def</span> <span class='id get_object'>get_object</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id filename'>filename</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id filename'>filename</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\/</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id filename'>filename</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write_to_file</span><span class='rbracket'>]</span>
    <span class='kw'>begin</span>
      <span class='const'>File</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write_to_file</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>wb</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span> <span class='id f'>f</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id msg'>msg</span>
      <span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id msg'>msg</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id clear'>clear</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span>      <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span>      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>File created</span><span class='tstring_end'>&quot;</span></span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:path_to_file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write_to_file</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
  <span class='kw'>end</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span>   <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id filename'>filename</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>



<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="list_buckets-instance_method">
  
    - (<tt>Object</tt>) <strong>list_buckets</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Lists all buckets available within your project</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#getservice">code.google.com/apis/storage/docs/reference-methods.html#getservice</a>
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/bucket.rb', line 13</span>

<span class='kw'>def</span> <span class='id list_buckets'>list_buckets</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:send_goog_project_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ListAllMyBucketsResult</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:buckets</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ListAllMyBucketsResult</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Buckets</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bucket</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:raw</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
    <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id each_key'>each_key</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id key'>key</span><span class='op'>|</span> <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:success</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:buckets</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:raw</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="object_acls-instance_method">
  
    - (<tt>Object</tt>) <strong>object_acls</strong>(bucket_name, filename, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Lists the ACL that has been applied to a particular object</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#getobject">code.google.com/apis/storage/docs/reference-methods.html#getobject</a>
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id client'>client</span><span class='period'>.</span><span class='id object_acls'>object_acls</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>file.jpg</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/object.rb', line 121</span>

<span class='kw'>def</span> <span class='id object_acls'>object_acls</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id filename'>filename</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id filename'>filename</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\/</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id filename'>filename</span><span class='rbrace'>}</span><span class='tstring_content'>?acl</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AccessControlList</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:object_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id filename'>filename</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:acl</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AccessControlList</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:raw</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span>
    <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id each_key'>each_key</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id key'>key</span><span class='op'>|</span> <span class='id resp_obj'>resp_obj</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:success</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:object_name</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:acl</span> <span class='op'>||</span> <span class='id key'>key</span> <span class='op'>==</span> <span class='symbol'>:raw</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="object_head-instance_method">
  
    - (<tt>Object</tt>) <strong>object_head</strong>(bucket_name, filename, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Returns the metadata of an Object stored</b>
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#headobject">code.google.com/apis/storage/docs/reference-methods.html#headobject</a>
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id client'>client</span><span class='period'>.</span><span class='id object_head'>object_head</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>file.jpg</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/object.rb', line 147</span>

<span class='kw'>def</span> <span class='id object_head'>object_head</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id filename'>filename</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id filename'>filename</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\/</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id head'>head</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id filename'>filename</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span> <span class='kw'>unless</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span>          <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span>         <span class='op'>=</span> <span class='id filename'>filename</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:last_modified</span><span class='rbracket'>]</span>    <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>last-modified</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>last-modified</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:etag</span><span class='rbracket'>]</span>             <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>etag</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>etag</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:content_length</span><span class='rbracket'>]</span>   <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:cache_control</span><span class='rbracket'>]</span>    <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cache-control</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cache-control</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span>             <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>date</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>date</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="put_object-instance_method">
  
    - (<tt>Object</tt>) <strong>put_object</strong>(bucket_name, filename, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='upload_object-instance_method'>upload_object</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
<b>Uploads an Object to Google Storage, or updates if using the same
filename</b>
</p>
<p>
If no :x_goog_acl option is supplied, a &#8216;private&#8217; ACL is
applied by default
</p>
<p>
Google Ref: <a
href="http://code.google.com/apis/storage/docs/reference-methods.html#putobject">code.google.com/apis/storage/docs/reference-methods.html#putobject</a>
</p>
<p>
<b>Note:</b> If no content type is specified then Google defaults to using
&#8216;binary/octet-stream&#8217;
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id client'>client</span><span class='period'>.</span><span class='id put_object'>put_object</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>file.jpg</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:path_to_file</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C:/example/file.jpg</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id client'>client</span><span class='period'>.</span><span class='id put_object'>put_object</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bucket_name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>file.jpg</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:data</span> <span class='op'>=&gt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C:/example/file.jpg</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
</pre>
<p>
Available Options:
</p>
<pre class="code">
  :x_goog_acl =&gt; 'public-read'
  :content_type =&gt; 'image/jpeg'     &lt;-- It's recommended to always include the content type
  :path_to_file =&gt; 'path_to_file_you_want_to_upload'
  :data =&gt; [binary_data]</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google_storage/object.rb', line 77</span>

<span class='kw'>def</span> <span class='id put_object'>put_object</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='id filename'>filename</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id filename'>filename</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\/</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:path_to_file</span><span class='rbracket'>]</span>
    <span class='kw'>begin</span>
      <span class='id uploaded_file'>uploaded_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:path_to_file</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id uploaded_file'>uploaded_file</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:get_input_stream</span><span class='rparen'>)</span>
        <span class='id uploaded_file'>uploaded_file</span><span class='period'>.</span><span class='id get_input_stream'>get_input_stream</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id io'>io</span><span class='op'>|</span> <span class='ivar'>@data</span> <span class='op'>=</span> <span class='id io'>io</span><span class='period'>.</span><span class='id read'>read</span> <span class='rbrace'>}</span>
      <span class='kw'>else</span>
        <span class='id uploaded_file'>uploaded_file</span><span class='period'>.</span><span class='id binmode'>binmode</span>
        <span class='ivar'>@data</span> <span class='op'>=</span> <span class='id uploaded_file'>uploaded_file</span><span class='period'>.</span><span class='id read'>read</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id msg'>msg</span>
      <span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id msg'>msg</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@data</span>
  <span class='kw'>end</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id put'>put</span><span class='lparen'>(</span><span class='id bucket_name'>bucket_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id filename'>filename</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id public_file'>public_file</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:x_goog_acl</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:x_goog_acl</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>public</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>Crack</span><span class='op'>::</span><span class='const'>XML</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id body'>body</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resp_obj'>resp_obj</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span>      <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span>      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Object added successfully</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='id filename'>filename</span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>binary/octet-stream</span><span class='tstring_end'>'</span></span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span>          <span class='op'>=</span> <span class='id public_file'>public_file</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='ivar'>@host</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id bucket_name'>bucket_name</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id filename'>filename</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> \
                                          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://sandbox.google.com/storage/</span><span class='embexpr_beg'>#{</span><span class='id bucket_name'>bucket_name</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id filename'>filename</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id resp_obj'>resp_obj</span><span class='lbracket'>[</span><span class='symbol'>:url_type</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='id public_file'>public_file</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>public</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>private</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id resp_obj'>resp_obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Fri Jul  1 12:07:25 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>